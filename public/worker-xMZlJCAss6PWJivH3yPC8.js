(()=>{"use strict";self.addEventListener("push",(function(i){const t=JSON.parse(i.data.text());i.waitUntil(registration.showNotification(t.title,{body:t.message,icon:"/icons/android-chrome-192x192.png"}))})),self.addEventListener("notificationclick",(function(i){i.notification.close(),i.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then((function(i){if(i.length>0){let t=i[0];for(let n=0;n<i.length;n++)i[n].focused&&(t=i[n]);return t.focus()}return clients.openWindow("/")})))})),self.addEventListener("pushsubscriptionchange",(function(i){i.waitUntil(Promise.all([Promise.resolve(!i.oldSubscription||deleteSubscription(i.oldSubscription)),Promise.resolve(i.newSubscription?i.newSubscription:subscribePush(registration)).then((function(i){return saveSubscription(i)}))]))}))})();